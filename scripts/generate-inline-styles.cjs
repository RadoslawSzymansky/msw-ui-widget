/* eslint-disable @typescript-eslint/no-require-imports */
/* eslint-disable no-undef */
const fs = require('fs');
const path = require('path');

// Read the built CSS file
const cssPath = path.join(__dirname, '../dist/style.css');
const css = fs.readFileSync(cssPath, 'utf8');

// Escape backticks and template literals
const escaped = css
  .replace(/\\/g, '\\\\')
  .replace(/`/g, '\\`')
  .replace(/\${/g, '\\${');

// Generate TypeScript file
const tsContent = `// This file is auto-generated by scripts/generate-inline-styles.js
// Do not edit manually - it will be overwritten on build

const widgetStyles = \`${escaped}\`;

export default widgetStyles;
`;

// Write to src/styles/inline.ts
const outputPath = path.join(__dirname, '../src/styles/inline.ts');
fs.writeFileSync(outputPath, tsContent, 'utf8');

console.log('âœ“ Generated inline styles file');
